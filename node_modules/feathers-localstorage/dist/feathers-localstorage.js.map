{"version":3,"sources":["webpack://feathers.localstorage/webpack/universalModuleDefinition","webpack://feathers.localstorage/webpack/bootstrap","webpack://feathers.localstorage/./lib/index.js","webpack://feathers.localstorage/../src/filter-query.ts","webpack://feathers.localstorage/../src/index.ts","webpack://feathers.localstorage/../src/service.ts","webpack://feathers.localstorage/../src/sort.ts","webpack://feathers.localstorage/../src/hooks.ts","webpack://feathers.localstorage/../src/utils.ts","webpack://feathers.localstorage/./node_modules/@feathersjs/errors/lib/index.js","webpack://feathers.localstorage/./node_modules/debug/src/browser.js","webpack://feathers.localstorage/./node_modules/debug/src/common.js","webpack://feathers.localstorage/./node_modules/feathers-memory/lib/index.js","webpack://feathers.localstorage/./node_modules/ms/index.js","webpack://feathers.localstorage/./node_modules/process/browser.js","webpack://feathers.localstorage/./node_modules/sift/src/index.js"],"names":["require","Service","usedKeys","LocalStorage","options","_storageKey","name","_storage","storage","window","localStorage","_throttle","throttle","_reuseKeys","reuseKeys","store","Error","indexOf","push","ready","Promise","resolve","getItem","then","str","JSON","parse","keys","Object","last","length","_uId","id","data","_timeout","setTimeout","setItem","stringify","method","args","execute","flush","module","exports","init","number","Math","abs","parseInt","undefined","getLimit","limit","paginate","default","lower","isNaN","upper","max","Number","MAX_VALUE","min","convertSort","sort","Array","isArray","reduce","result","key","cleanQuery","query","operators","filters","map","value","commons_1","isObject","constructor","each","includes","errors_1","getOwnPropertySymbols","forEach","symbol","assignFilters","object","converter","converted","$sort","$limit","$skip","$select","filterQuery","additionalFilters","additionalOperators","concat","assign","enumerable","get","__exportStar","select","params","fields","otherFields","convert","pick","callMethod","self","reject","alwaysMulti","find","update","AdapterService","events","multi","whitelist","opts","always","option","allowsMulti","compareNSB","a","b","compareArrays","i","comp","compare","compareStrings","Date","getTime","aKeys","bKeys","sorter","criteria","direction","criterion","utils_1","createHookObject","hook","defineProperty","path","app","service","services","defaultMakeArguments","makeArguments","convertHookData","obj","all","isHookObject","hookObject","type","getHooks","appLast","appHooks","__hooks","serviceHooks","processHooks","hooks","initialHookObject","updateCurrentHook","current","promise","fn","bind","currentHook","catch","error","enableHooks","methods","types","hookData","configurable","writable","allHooks","_value","myHooks","apply","hookUtils","stripSlashes","replace","callback","some","val","every","values","isMatch","item","isEmpty","isObjectOrArray","extend","first","rest","omit","source","merge","target","isPromise","makeUrl","env","process","host","HOST_NAME","protocol","PORT","port","createSymbol","Symbol","debug","FeathersError","msg","code","className","errors","message","newData","captureStackTrace","stack","inheritsFrom","Child","Parent","prototype","create","BadRequest","call","NotAuthenticated","PaymentError","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","Timeout","Conflict","Gone","LengthRequired","Unprocessable","TooManyRequests","GeneralError","NotImplemented","BadGateway","Unavailable","formatArgs","save","load","useColors","localstorage","destroy","warned","console","warn","colors","__nwjs","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","firebug","exception","table","RegExp","$1","namespace","humanize","diff","c","color","splice","index","lastC","log","namespaces","removeItem","r","DEBUG","formatters","j","v","setup","createDebug","coerce","disable","enable","enabled","names","skips","selectColor","hash","charCodeAt","prevTime","enableOverride","namespacesCache","enabledCache","curr","ms","prev","unshift","format","formatter","logFn","set","delimiter","newDebug","split","len","slice","toNamespace","join","test","regexp","toString","substring","_","sift","_select","base","matcher","startId","_find","filter","total","skip","_create","_get","oldEntry","oldId","patchEntry","entry","currentId","getEntries","entries","_remove","typeChecker","typeString","isFunction","nestable","validator","validateOptions","valueOwner","nestedResults","Boolean","or","n","and","validate","defaultExpressions","$eq","$ne","$gt","$gte","$lt","$lte","$mod","$in","$nin","$not","$type","testType","$all","allOptions","$and","$size","sizeMatch","$or","orOptions","$nor","$regex","$where","$elemMatch","search","$exists","hasOwnProperty","prepare","queryOwner","comparable","Function","comparableValue","String","createRootValidator","eq","$options","array","createValidator","validatedNested","keyPath","child","results","findValues","inclusive","allValid","allValues","keypath","k","createNestedValidator","isVanillaObject","expressions","wrapQuery","parseQuery","validators","queryValue","expression","keyParts","parseNested","isExactObject","isEqual","parseRoot","getAllKeys","allKeysHash","toJSON"],"mappings":"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O,KAAK1T,KAAL,CAAWiB,EAAX,CAAP;gBAXF,kCAaSyS,KAbT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;EA5GoB1N,c;;AA6HtBrE,MAAM,CAACC,OAAP,GAAiB,UAAAvC,OAAO,EAAI;EAC1B,OAAO,IAAIH,OAAJ,CAAYG,OAAZ,CAAP;AACD,CAFD;;AAIAsC,MAAM,CAACC,OAAP,CAAe1C,OAAf,GAAyBA,OAAzB,C;;;;;;;;;;;AC5IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACjKA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAS6U,WAAT,CAAqBxL,IAArB,EAA2B;EACzB,IAAIyL,UAAU,GAAG,aAAazL,IAAb,GAAoB,GAArC;EACA,OAAO,UAAS7E,KAAT,EAAgB;IACrB,OAAO7C,MAAM,CAACgM,SAAP,CAAiB4F,QAAjB,CAA0BzF,IAA1B,CAA+BtJ,KAA/B,MAA0CsQ,UAAjD;EACD,CAFD;AAGD;AAED;AACA;;;AAEA,IAAI/Q,OAAO,GAAG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","file":"feathers-localstorage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"localstorage\"] = factory();\n\telse\n\t\troot[\"feathers\"] = root[\"feathers\"] || {}, root[\"feathers\"][\"localstorage\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/index.js\");\n","const { Service } = require('feathers-memory');\n\nconst usedKeys = [];\n\nclass LocalStorage extends Service {\n  constructor (options = {}) {\n    super(options);\n    this._storageKey = options.name || 'feathers';\n    this._storage = options.storage || (typeof window !== 'undefined' && window.localStorage);\n    this._throttle = options.throttle || 200;\n    this._reuseKeys = options.reuseKeys || false;\n    this.store = null;\n\n    if (!this._storage) {\n      throw new Error('The `storage` option needs to be provided');\n    }\n\n    if (usedKeys.indexOf(this._storageKey) === -1) {\n      usedKeys.push(this._storageKey);\n    } else {\n      if (!this._reuseKeys) { // Allow reuse if options.reuseKeys set to true\n        throw new Error(`The storage name '${this._storageKey}' is already in use by another instance.`);\n      }\n    }\n\n    this.ready();\n  }\n\n  ready () {\n    if (!this.store) {\n      return Promise.resolve(this._storage.getItem(this._storageKey))\n        .then(str => JSON.parse(str || '{}'))\n        .then(store => {\n          const keys = Object.keys(store);\n          const last = store[keys[keys.length - 1]];\n\n          // Current id is the id of the last item\n          this._uId = (keys.length && typeof last[this.id] !== 'undefined') ? last[this.id] + 1 : this._uId;\n\n          return (this.store = store);\n        });\n    }\n\n    return Promise.resolve(this.store);\n  }\n\n  flush (data) {\n    if (!this._timeout) {\n      this._timeout = setTimeout(() => {\n        this._storage.setItem(this._storageKey, JSON.stringify(this.store));\n        delete this._timeout;\n      }, this._throttle);\n    }\n\n    return data;\n  }\n\n  execute (method, ...args) {\n    return this.ready()\n      .then(() => super[method](...args));\n  }\n\n  find (...args) {\n    return this.execute('find', ...args);\n  }\n\n  get (...args) {\n    return this.execute('get', ...args);\n  }\n\n  create (...args) {\n    return this.execute('create', ...args)\n      .then(data => this.flush(data));\n  }\n\n  patch (...args) {\n    return this.execute('patch', ...args)\n      .then(data => this.flush(data));\n  }\n\n  update (...args) {\n    return this.execute('update', ...args)\n      .then(data => this.flush(data));\n  }\n\n  remove (...args) {\n    return this.execute('remove', ...args)\n      .then(data => this.flush(data));\n  }\n}\n\nmodule.exports = function init (options) {\n  return new LocalStorage(options);\n};\n\nmodule.exports.Service = LocalStorage;\n",null,null,null,null,null,null,"const debug = require('debug')('@feathersjs/errors');\n\nfunction FeathersError (msg, name, code, className, data) {\n  msg = msg || 'Error';\n\n  let errors;\n  let message;\n  let newData;\n\n  if (msg instanceof Error) {\n    message = msg.message || 'Error';\n\n    // NOTE (EK): This is typically to handle validation errors\n    if (msg.errors) {\n      errors = msg.errors;\n    }\n  } else if (typeof msg === 'object') { // Support plain old objects\n    message = msg.message || 'Error';\n    data = msg;\n  } else { // message is just a string\n    message = msg;\n  }\n\n  if (data) {\n    // NOTE(EK): To make sure that we are not messing\n    // with immutable data, just make a copy.\n    // https://github.com/feathersjs/errors/issues/19\n    newData = JSON.parse(JSON.stringify(data));\n\n    if (newData.errors) {\n      errors = newData.errors;\n      delete newData.errors;\n    } else if (data.errors) {\n      // The errors property from data could be\n      // stripped away while cloning resulting newData not to have it\n      // For example: when cloning arrays this property\n      errors = JSON.parse(JSON.stringify(data.errors));\n    }\n  }\n\n  // NOTE (EK): Babel doesn't support this so\n  // we have to pass in the class name manually.\n  // this.name = this.constructor.name;\n  this.type = 'FeathersError';\n  this.name = name;\n  this.message = message;\n  this.code = code;\n  this.className = className;\n  this.data = newData;\n  this.errors = errors || {};\n\n  debug(`${this.name}(${this.code}): ${this.message}`);\n  debug(this.errors);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, FeathersError);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n}\n\nfunction inheritsFrom (Child, Parent) {\n  Child.prototype = Object.create(Parent.prototype);\n  Child.prototype.constructor = Child;\n}\n\ninheritsFrom(FeathersError, Error);\n\n// NOTE (EK): A little hack to get around `message` not\n// being included in the default toJSON call.\nObject.defineProperty(FeathersError.prototype, 'toJSON', {\n  value: function () {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      className: this.className,\n      data: this.data,\n      errors: this.errors\n    };\n  }\n});\n\n// 400 - Bad Request\nfunction BadRequest (message, data) {\n  FeathersError.call(this, message, 'BadRequest', 400, 'bad-request', data);\n}\n\ninheritsFrom(BadRequest, FeathersError);\n\n// 401 - Not Authenticated\nfunction NotAuthenticated (message, data) {\n  FeathersError.call(this, message, 'NotAuthenticated', 401, 'not-authenticated', data);\n}\n\ninheritsFrom(NotAuthenticated, FeathersError);\n\n// 402 - Payment Error\nfunction PaymentError (message, data) {\n  FeathersError.call(this, message, 'PaymentError', 402, 'payment-error', data);\n}\n\ninheritsFrom(PaymentError, FeathersError);\n\n// 403 - Forbidden\nfunction Forbidden (message, data) {\n  FeathersError.call(this, message, 'Forbidden', 403, 'forbidden', data);\n}\n\ninheritsFrom(Forbidden, FeathersError);\n\n// 404 - Not Found\nfunction NotFound (message, data) {\n  FeathersError.call(this, message, 'NotFound', 404, 'not-found', data);\n}\n\ninheritsFrom(NotFound, FeathersError);\n\n// 405 - Method Not Allowed\nfunction MethodNotAllowed (message, data) {\n  FeathersError.call(this, message, 'MethodNotAllowed', 405, 'method-not-allowed', data);\n}\n\ninheritsFrom(MethodNotAllowed, FeathersError);\n\n// 406 - Not Acceptable\nfunction NotAcceptable (message, data) {\n  FeathersError.call(this, message, 'NotAcceptable', 406, 'not-acceptable', data);\n}\n\ninheritsFrom(NotAcceptable, FeathersError);\n\n// 408 - Timeout\nfunction Timeout (message, data) {\n  FeathersError.call(this, message, 'Timeout', 408, 'timeout', data);\n}\n\ninheritsFrom(Timeout, FeathersError);\n\n// 409 - Conflict\nfunction Conflict (message, data) {\n  FeathersError.call(this, message, 'Conflict', 409, 'conflict', data);\n}\n\ninheritsFrom(Conflict, FeathersError);\n\n// 410 - Gone\nfunction Gone (message, data) {\n  FeathersError(this, message, 'Gone', 410, 'gone', data);\n}\n\ninheritsFrom(Gone, FeathersError);\n\n// 411 - Length Required\nfunction LengthRequired (message, data) {\n  FeathersError.call(this, message, 'LengthRequired', 411, 'length-required', data);\n}\n\ninheritsFrom(LengthRequired, FeathersError);\n\n// 422 Unprocessable\nfunction Unprocessable (message, data) {\n  FeathersError.call(this, message, 'Unprocessable', 422, 'unprocessable', data);\n}\n\ninheritsFrom(Unprocessable, FeathersError);\n\n// 429 Too Many Requests\nfunction TooManyRequests (message, data) {\n  FeathersError.call(this, message, 'TooManyRequests', 429, 'too-many-requests', data);\n}\n\ninheritsFrom(TooManyRequests, FeathersError);\n\n// 500 - General Error\nfunction GeneralError (message, data) {\n  FeathersError.call(this, message, 'GeneralError', 500, 'general-error', data);\n}\n\ninheritsFrom(GeneralError, FeathersError);\n\n// 501 - Not Implemented\nfunction NotImplemented (message, data) {\n  FeathersError.call(this, message, 'NotImplemented', 501, 'not-implemented', data);\n}\n\ninheritsFrom(NotImplemented, FeathersError);\n\n// 502 - Bad Gateway\nfunction BadGateway (message, data) {\n  FeathersError.call(this, message, 'BadGateway', 502, 'bad-gateway', data);\n}\n\ninheritsFrom(BadGateway, FeathersError);\n\n// 503 - Unavailable\nfunction Unavailable (message, data) {\n  FeathersError.call(this, message, 'Unavailable', 503, 'unavailable', data);\n}\n\ninheritsFrom(Unavailable, FeathersError);\n\nconst errors = {\n  FeathersError,\n  BadRequest,\n  NotAuthenticated,\n  PaymentError,\n  Forbidden,\n  NotFound,\n  MethodNotAllowed,\n  NotAcceptable,\n  Timeout,\n  Conflict,\n  Gone,\n  LengthRequired,\n  Unprocessable,\n  TooManyRequests,\n  GeneralError,\n  NotImplemented,\n  BadGateway,\n  Unavailable,\n  400: BadRequest,\n  401: NotAuthenticated,\n  402: PaymentError,\n  403: Forbidden,\n  404: NotFound,\n  405: MethodNotAllowed,\n  406: NotAcceptable,\n  408: Timeout,\n  409: Conflict,\n  410: Gone,\n  411: LengthRequired,\n  422: Unprocessable,\n  429: TooManyRequests,\n  500: GeneralError,\n  501: NotImplemented,\n  502: BadGateway,\n  503: Unavailable\n};\n\nfunction convert (error) {\n  if (!error) {\n    return error;\n  }\n\n  const FeathersError = errors[error.name];\n  const result = FeathersError\n    ? new FeathersError(error.message, error.data)\n    : new Error(error.message || error);\n\n  if (typeof error === 'object') {\n    Object.assign(result, error);\n  }\n\n  return result;\n}\n\nmodule.exports = Object.assign({ convert }, errors);\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","const errors = require('@feathersjs/errors');\nconst { _ } = require('@feathersjs/commons');\nconst { sorter, select, AdapterService } = require('@feathersjs/adapter-commons');\nconst sift = require('sift').default;\n\nconst _select = (data, ...args) => {\n  const base = select(...args);\n\n  return base(JSON.parse(JSON.stringify(data)));\n};\n\nclass Service extends AdapterService {\n  constructor (options = {}) {\n    super(_.extend({\n      id: 'id',\n      matcher: sift,\n      sorter\n    }, options));\n    this._uId = options.startId || 0;\n    this.store = options.store || {};\n  }\n\n  async getEntries (params = {}) {\n    const { query } = this.filterQuery(params);\n\n    return this._find(Object.assign({}, params, {\n      paginate: false,\n      query\n    }));\n  }\n\n  async _find (params = {}) {\n    const { query, filters, paginate } = this.filterQuery(params);\n    let values = _.values(this.store).filter(this.options.matcher(query));\n    const total = values.length;\n\n    if (filters.$sort !== undefined) {\n      values.sort(this.options.sorter(filters.$sort));\n    }\n\n    if (filters.$skip !== undefined) {\n      values = values.slice(filters.$skip);\n    }\n\n    if (filters.$limit !== undefined) {\n      values = values.slice(0, filters.$limit);\n    }\n\n    const result = {\n      total,\n      limit: filters.$limit,\n      skip: filters.$skip || 0,\n      data: values.map(value => _select(value, params))\n    };\n\n    if (!(paginate && paginate.default)) {\n      return result.data;\n    }\n\n    return result;\n  }\n\n  async _get (id, params = {}) {\n    if (id in this.store) {\n      const { query } = this.filterQuery(params);\n      const value = this.store[id];\n\n      if (this.options.matcher(query)(value)) {\n        return _select(value, params, this.id);\n      }\n    }\n\n    throw new errors.NotFound(`No record found for id '${id}'`);\n  }\n\n  // Create without hooks and mixins that can be used internally\n  async _create (data, params = {}) {\n    if (Array.isArray(data)) {\n      return Promise.all(data.map(current => this._create(current, params)));\n    }\n\n    const id = data[this.id] || this._uId++;\n    const current = _.extend({}, data, { [this.id]: id });\n    const result = (this.store[id] = current);\n\n    return _select(result, params, this.id);\n  }\n\n  async _update (id, data, params = {}) {\n    const oldEntry = await this._get(id);\n    // We don't want our id to change type if it can be coerced\n    const oldId = oldEntry[this.id];\n\n    id = oldId == id ? oldId : id; // eslint-disable-line\n\n    this.store[id] = _.extend({}, data, { [this.id]: id });\n\n    return this._get(id, params);\n  }\n\n  async _patch (id, data, params = {}) {\n    const patchEntry = entry => {\n      const currentId = entry[this.id];\n\n      this.store[currentId] = _.extend(this.store[currentId], _.omit(data, this.id));\n\n      return _select(this.store[currentId], params, this.id);\n    };\n\n    if (id === null) {\n      const entries = await this.getEntries(params);\n\n      return entries.map(patchEntry);\n    }\n\n    return patchEntry(await this._get(id, params)); // Will throw an error if not found\n  }\n\n  // Remove without hooks and mixins that can be used internally\n  async _remove (id, params = {}) {\n    if (id === null) {\n      const entries = await this.getEntries(params);\n\n      return Promise.all(entries.map(\n        current => this._remove(current[this.id], params))\n      );\n    }\n\n    const entry = await this._get(id, params);\n\n    delete this.store[id];\n\n    return entry;\n  }\n}\n\nmodule.exports = options => {\n  return new Service(options);\n};\n\nmodule.exports.Service = Service;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n *\n * Copryright 2018, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\nfunction typeChecker(type) {\n  var typeString = \"[object \" + type + \"]\";\n  return function(value) {\n    return Object.prototype.toString.call(value) === typeString;\n  };\n}\n\n/**\n */\n\nvar isArray = typeChecker(\"Array\");\nvar isObject = typeChecker(\"Object\");\nvar isFunction = typeChecker(\"Function\");\n\nfunction get(obj, key) {\n  return isFunction(obj.get) ? obj.get(key) : obj[key];\n}\n\n\nconst nestable = (validator) => (validateOptions, value, key, valueOwner, nestedResults) => {\n  if (nestedResults) {\n    return Boolean(nestedResults.find(([value, key, valueOwner]) => validator(validateOptions, key, valueOwner)));\n  }\n\n  return validator(validateOptions, value, key, valueOwner);\n};\n\n/**\n */\n\nconst or = nestable((validator) => {\n  return function(validateOptions, value, key, valueOwner, nestedResults) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (validator(validateOptions, get(value, i))) return true;\n    }\n    return false;\n  };\n});\n\n/**\n */\n\nfunction and(validator) {\n  return function(validateOptions, value, key, valueOwner) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value, key, valueOwner);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (!validator(validateOptions, get(value, i), value, valueOwner)) return false;\n    }\n    return true;\n  };\n}\n\nfunction validate(validator, value, key, valueOwner, nestedResults) {\n  return validator.validate(validator.options, value, key, valueOwner, nestedResults);\n}\n\nvar defaultExpressions = {\n  /**\n   */\n\n  $eq: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $ne: and(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $mod: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $in(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $nin: function(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $not: function(test, value, key, valueOwner) {\n    return test(value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $type: function(testType, value) {\n    return testType(value);\n  },\n\n  /**\n   */\n\n  $all: function(allOptions, value, key, valueOwner, nestedResults) {\n    return defaultExpressions.$and(allOptions, value, key, valueOwner, nestedResults);\n  },\n\n  /**\n   */\n\n  $size: function(sizeMatch, value) {\n    return value ? sizeMatch === value.length : false;\n  },\n\n  /**\n   */\n\n  $or: function(orOptions, value, key, valueOwner) {\n    for (var i = 0, n = orOptions.length; i < n; i++) {\n      if (validate(get(orOptions, i), value, key, valueOwner)) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   */\n\n  $nor: function(validateOptions, value, key, valueOwner) {\n    return !defaultExpressions.$or(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $and: function(validateOptions, value, key, valueOwner, nestedResults) {\n\n    if (nestedResults) {\n      for (var i = 0, n = validateOptions.length; i < n; i++) {\n        if (!validate(get(validateOptions, i), value, key, valueOwner, nestedResults)) {\n          return false;\n        }\n      }\n    } else {\n      for (var i = 0, n = validateOptions.length; i < n; i++) {\n        if (!validate(get(validateOptions, i), value, key, valueOwner, nestedResults)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  },\n\n  /**\n   */\n\n  $regex: or(function(validateOptions, value) {\n    return typeof value === \"string\" && validateOptions.test(value);\n  }),\n\n  /**\n   */\n\n  $where: function(validateOptions, value, key, valueOwner) {\n    return validateOptions.call(value, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $elemMatch: function(validateOptions, value, key, valueOwner) {\n    if (isArray(value)) {\n      return !!~search(value, validateOptions);\n    }\n    return validate(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $exists: function(validateOptions, value, key, valueOwner) {\n    return valueOwner.hasOwnProperty(key) === validateOptions;\n  }\n};\n\n/**\n */\n\nvar prepare = {\n  /**\n   */\n\n  $eq: function(query, queryOwner, { comparable, compare }) {\n    if (query instanceof RegExp) {\n      return or(function(value) {\n        return typeof value === \"string\" && query.test(value);\n      });\n    } else if (query instanceof Function) {\n      return or(query);\n    } else if (isArray(query) && !query.length) {\n      // Special case of a == []\n      return or(function(value) {\n        return isArray(value) && !value.length;\n      });\n    } else if (query === null) {\n      return or(function(value) {\n        //will match both null and undefined\n        return value == null;\n      });\n    }\n    return or(function(value) {\n      return compare(comparable(value), comparable(query)) === 0;\n    });\n  },\n\n  $gt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) > 0;\n    };\n  },\n\n  $gte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) >= 0;\n    };\n  },\n\n  $lt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) < 0;\n    };\n  },\n  $lte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) <= 0;\n    };\n  },\n\n  $in: function(query, queryOwner, options) {\n    const { comparable } = options;\n    return function(value) {\n      if (value instanceof Array) {\n        for (var i = value.length; i--; ) {\n          if (~query.indexOf(comparable(get(value, i)))) {\n            return true;\n          }\n        }\n      } else {\n        var comparableValue = comparable(value);\n        if (comparableValue === value && typeof value === \"object\") {\n          for (var i = query.length; i--; ) {\n            if (\n              String(query[i]) === String(value) &&\n              String(value) !== \"[object Object]\"\n            ) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles documents that are undefined, whilst also\n          having a 'null' element in the parameters to $in.\n        */\n        if (typeof comparableValue == \"undefined\") {\n          for (var i = query.length; i--; ) {\n            if (query[i] == null) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles the case of {'field': {$in: [/regexp1/, /regexp2/, ...]}}\n        */\n        for (var i = query.length; i--; ) {\n          var validator = createRootValidator(get(query, i), options);\n          var result = validate(validator, comparableValue, i, query);\n          if (\n            result &&\n            String(result) !== \"[object Object]\" &&\n            String(comparableValue) !== \"[object Object]\"\n          ) {\n            return true;\n          }\n        }\n\n        return !!~query.indexOf(comparableValue);\n      }\n\n      return false;\n    };\n  },\n\n  $nin: function(query, queryOwner, options) {\n    const eq = prepare.$in(query, queryOwner, options);\n    return function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $mod: function(query) {\n    return function(value) {\n      return value % query[0] == query[1];\n    };\n  },\n\n  /**\n   */\n\n  $ne: function(query, queryOwner, options) {\n    const eq = prepare.$eq(query, queryOwner, options);\n    return and(function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    });\n  },\n\n  /**\n   */\n\n  $and: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $all: function(query, queryOwner, options) {\n    return prepare.$and(query, queryOwner, options);\n  },\n\n  /**\n   */\n\n  $or: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $nor: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $not: function(query, queryOwner, options) {\n    const validateOptions = parse(options)(query);\n    return function(value, key, valueOwner) {\n      return !validate(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $type: function(query) {\n    return function(value, key, valueOwner) {\n      return value != void 0\n        ? value instanceof query || value.constructor == query\n        : false;\n    };\n  },\n\n  /**\n   */\n\n  $regex: function(query, queryOwner) {\n    return new RegExp(query, queryOwner.$options);\n  },\n\n  /**\n   */\n\n  $where: function(query) {\n    return typeof query === \"string\"\n      ? new Function(\"obj\", \"return \" + query)\n      : query;\n  },\n\n  /**\n   */\n\n  $elemMatch: function(query, queryOwner, options) {\n    return parse(options)(query);\n  },\n\n  /**\n   */\n\n  $exists: function(query) {\n    return !!query;\n  }\n};\n\n/**\n */\n\nfunction search(array, validator) {\n  for (var i = 0; i < array.length; i++) {\n    var result = get(array, i);\n    if (validate(validator, get(array, i))) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n */\n\nfunction createValidator(options, validate) {\n  return { options, validate };\n}\n\n/**\n */\n\nfunction validatedNested({ keyPath, child, query }, value) {\n  const results = [];\n  findValues(value, keyPath, 0, value, results);\n  \n  if (results.length === 1) {\n    const [value, key, valueOwner] = results[0];\n    return validate(child, value, key, valueOwner);\n  }\n\n  // If the query contains $ne, need to test all elements ANDed together\n  var inclusive = query && typeof query.$ne !== \"undefined\";\n  var allValid = inclusive;\n  const allValues = results.map(([value]) => value);\n\n  return validate(child, undefined, undefined, undefined, results);\n  // for (var i = 0; i < results.length; i++) {\n  //   const [value, key, valueOwner] = results[i];\n  //   var isValid = validate(child, value, key, valueOwner);\n  //   console.log(isValid, value);\n  //   if (inclusive) {\n  //     allValid &= isValid;\n  //   } else {\n  //     allValid |= isValid;\n  //   }\n  // }\n  // return allValid;\n}\n\n/**\n */\n\nfunction findValues(current, keypath, index, object, values) {\n  if (index === keypath.length || current == void 0) {\n    values.push([current, keypath[index - 1], object]);\n    return;\n  }\n\n  var k = get(keypath, index);\n\n  // ensure that if current is an array, that the current key\n  // is NOT an array index. This sort of thing needs to work:\n  // sift({'foo.0':42}, [{foo: [42]}]);\n  if (isArray(current) && isNaN(Number(k))) {\n    for (var i = 0, n = current.length; i < n; i++) {\n      findValues(get(current, i), keypath, index, current, values);\n    }\n  } else {\n    findValues(get(current, k), keypath, index + 1, current, values);\n  }\n}\n\n/**\n */\n\nfunction createNestedValidator(keyPath, child, query) {\n  return createValidator({ keyPath, child, query }, validatedNested);\n}\n\n/**\n * flatten the query\n */\n\nfunction isVanillaObject(value) {\n  return (\n    value &&\n    (value.constructor === Object ||\n      value.constructor === Array ||\n      value.constructor.toString() === \"function Object() { [native code] }\" ||\n      value.constructor.toString() === \"function Array() { [native code] }\")\n  );\n}\n\nfunction parse(options) {\n  const { comparable, expressions } = options;\n  var wrapQuery = function(query) {\n    if (!query || !isVanillaObject(query)) {\n      query = { $eq: query };\n    }\n    return query;\n  };\n\n  var parseQuery = function(query) {\n    query = comparable(query);\n\n    var validators = [];\n\n    for (var key in query) {\n      var queryValue = query[key];\n\n      if (key === \"$options\") {\n        continue;\n      }\n\n      var expression =\n        defaultExpressions[key] || (options && expressions && expressions[key]);\n\n      if (expression) {\n        if (prepare[key]) {\n          queryValue = prepare[key](queryValue, query, options);\n        }\n        validators.push(createValidator(comparable(queryValue), expression));\n      } else {\n        if (key.charCodeAt(0) === 36) {\n          throw new Error(\"Unknown operation \" + key);\n        }\n\n        var keyParts = key.split(\".\");\n\n        validators.push(\n          createNestedValidator(keyParts, parseNested(queryValue), queryValue)\n        );\n      }\n    }\n\n    return validators.length === 1\n      ? validators[0]\n      : createValidator(validators, defaultExpressions.$and);\n  };\n\n  var parseNested = function(query) {\n    query = wrapQuery(query);\n    if (isExactObject(query)) {\n      return createValidator(query, isEqual);\n    }\n    return parseQuery(query);\n  };\n\n  var parseRoot = function(query) {\n    return parseQuery(wrapQuery(query));\n  };\n\n  return parseRoot;\n}\n\nfunction isEqual(a, b) {\n  if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n    return false;\n  }\n\n  if (isObject(a)) {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n      return false;\n    }\n\n    for (var key in a) {\n      if (!isEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else if (isArray(a)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (var i = 0, n = a.length; i < n; i++) {\n      if (!isEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return a === b;\n  }\n}\n\nfunction getAllKeys(value, keys) {\n  if (!isObject(value)) {\n    return keys;\n  }\n  for (var key in value) {\n    keys.push(key);\n    getAllKeys(value[key], keys);\n  }\n  return keys;\n}\n\nfunction isExactObject(value) {\n  const allKeysHash = getAllKeys(value, []).join(\",\");\n  return allKeysHash.search(/[$.]/) === -1;\n}\n\n/**\n */\n\nfunction createRootValidator(query, options) {\n  var validator = parse(options)(query);\n  if (options && options.select) {\n    validator = {\n      options: validator,\n      validate: function(validateOptions, value, key, valueOwner) {\n        return validate(\n          validateOptions,\n          value && options.select(value),\n          key,\n          valueOwner\n        );\n      }\n    };\n  }\n  return validator;\n}\n\n/**\n */\n\nexport default function sift(query, options) {\n  options = Object.assign({ compare, comparable }, options);\n  var validator = createRootValidator(query, options);\n  return function(value, key, valueOwner) {\n    return validate(validator, value, key, valueOwner);\n  };\n}\n\n/**\n */\n\nexport function compare(a, b) {\n  if (isEqual(a, b)) return 0;\n  if (typeof a === typeof b) {\n    if (a > b) {\n      return 1;\n    }\n    if (a < b) {\n      return -1;\n    }\n  }\n}\n\n/**\n */\n\nexport function comparable(value) {\n  if (value instanceof Date) {\n    return value.getTime();\n  } else if (isArray(value)) {\n    return value.map(comparable);\n  } else if (value && typeof value.toJSON === \"function\") {\n    return value.toJSON();\n  } else {\n    return value;\n  }\n}\n"],"sourceRoot":""}